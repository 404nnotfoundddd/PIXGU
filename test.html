<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <canvas width="300" height="300" id="canvas"></canvas>
  </body>
  <style>
    html {
      height: 100%;
    }

    body {
      background-color: #00ffaa;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: start;
    }

    canvas {
      border: black 2px solid;
    }
  </style>
  <script>
    const canvas = document.getElementById('canvas');
    canvas.addEventListener('click', (e) => {
      console.log(e.pageX, e.pageY);
    });
    const canvasBoundingRect = canvas.getBoundingClientRect();
    setInterval(() => {
      const body = document.body;

      const randomX = (() => {
        let random = Math.random() * body.offsetWidth - 20;

        while (
          random > canvasBoundingRect.left - 20 &&
          random < canvasBoundingRect.right + 20
        ) {
          random = Math.random() * body.offsetWidth - 20;
        }

        return random;
      })();
      const randomY = (() => {
        let random = Math.random() * body.offsetWidth - 20;

        while (
          random > canvasBoundingRect.top + 20 &&
          random < canvasBoundingRect.bottom + 20
        ) {
          random = Math.random() * body.offsetHeight - 20;
        }

        return random;
      })();
      console.log(randomX, randomY);

      const div = document.createElement('div');
      div.style.position = 'absolute';
      div.style.left = randomX + 'px';
      div.style.top = randomY + 'px';
      div.style.width = '20px';
      div.style.height = '20px';
      div.textContent = 'lorem ipssum';
      div.style.transition = 'all 1s';
      body.appendChild(div);

      setTimeout(() => {
        div.remove();
      }, 500);
    }, 40);
  </script>
</html>
